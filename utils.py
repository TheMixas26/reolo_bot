from random import choice, random
from telebot import types
from config import predlojka_bot, admin
from datetime import datetime

def thx_for_message(user_name, mes_type):
    
    variants_v = [
        f"–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, {user_name}!!!",
        f"–°–ø–∞—Å–∏–±–æ –∑–∞ –Ω–æ–≤—ã–π –ø–æ—Å—Ç, {user_name}!!!",
        f"–ö–∞–Ω–∞–ª –ñ–∏–≤ –±–ª–∞–≥–æ–¥–∞—Ä—è —Ç–∞–∫–∏–º, –∫–∞–∫ –≤—ã, {user_name}. –°–ø–∞—Å–∏–±–æ!!!",
        f"–û—Ç–ª–∏—á–Ω—ã–π –≤–∫–ª–∞–¥, {user_name}! –¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å!",
        f"–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - –∫–∞–∫ –≥–ª–æ—Ç–æ–∫ —Å–≤–µ–∂–µ–≥–æ –≤–æ–∑–¥—É—Ö–∞, {user_name}. –ë–ª–∞–≥–æ–¥–∞—Ä—é!",
        f"{user_name}, –≤—ã –¥–µ–ª–∞–µ—Ç–µ —ç—Ç–æ—Ç –∫–∞–Ω–∞–ª –ª—É—á—à–µ. –°–ø–∞—Å–∏–±–æ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å!",
        f"–ë–µ–∑ –≤–∞—Å –∑–¥–µ—Å—å –±—ã–ª–æ –±—ã —Å–∫—É—á–Ω–æ, {user_name}. –û–≥—Ä–æ–º–Ω–æ–µ —Å–ø–∞—Å–∏–±–æ!",
        f"–ö–∞–∂–¥–æ–µ –≤–∞—à–µ —Å–ª–æ–≤–æ - –Ω–∞ –≤–µ—Å –∑–æ–ª–æ—Ç–∞, {user_name}. –¶–µ–Ω–∏–º!",
        f"{user_name}, –≤—ã - –¥–≤–∏–≥–∞—Ç–µ–ª—å –∫–∞–Ω–∞–ª–∞. –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –ø–æ—Å—Ç!",
        f"–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –Ω–µ –¥–∞—ë—Ç–µ –Ω–∞–º –∑–∞–≥–ª–æ—Ö–Ω—É—Ç—å, {user_name}!",
        f"–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - –Ω–∞—Å—Ç–æ—è—â–∏–π –ø–æ–¥–∞—Ä–æ–∫ –¥–ª—è –Ω–∞—Å, {user_name}. –ë–ª–∞–≥–æ–¥–∞—Ä—é!",
        f"–í–æ—É-–≤–æ—É-–≤–æ—É, –ø–æ–ª–µ–≥—á–µ! {user_name}, —Å–ø–∞—Å–∏–±–æ –∑–∞ —Ç–∞–∫–æ–π –º–æ—â–Ω—ã–π –ø–æ—Å—Ç!",
        f"–≠–π, {user_name}, –≤—ã –ø—Ä–æ—Å—Ç–æ –∑–≤–µ–∑–¥–∞! –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!",
        f"–í–∞—à –ø–æ—Å—Ç - –∫–∞–∫ –ª—É—á —Å–æ–ª–Ω—Ü–∞ –≤ –ø–∞—Å–º—É—Ä–Ω—ã–π –¥–µ–Ω—å, {user_name}. –°–ø–∞—Å–∏–±–æ!",
        f"–°–ø–∞—Å–∏–±–æ, {user_name}! –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–¥–Ω—è–ª–æ –Ω–∞–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ!",
        f"–û–≥–æ, {user_name}, –≤—ã –ø—Ä–æ—Å—Ç–æ –∫–ª–∞–¥–µ–∑—å –∏–¥–µ–π! –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!",
        f"{user_name}, –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - —ç—Ç–æ –∫–∞–∫ –Ω–∞—Ö–æ–¥–∫–∞ –¥–ª—è –∞—Ä—Ö–µ–æ–ª–æ–≥–∞! –ë–ª–∞–≥–æ–¥–∞—Ä—é!",
        f"–í–∞—à –ø–æ—Å—Ç - –∫–∞–∫ —Ä–µ–¥–∫–∞—è –∂–µ–º—á—É–∂–∏–Ω–∞ –≤ –æ–∫–µ–∞–Ω–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, {user_name}. –°–ø–∞—Å–∏–±–æ!",
        f"–°–ø–∞—Å–∏–±–æ, {user_name}! –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - —ç—Ç–æ –∫–∞–∫ –≥–ª–æ—Ç–æ–∫ —Å–≤–µ–∂–µ–≥–æ –≤–æ–∑–¥—É—Ö–∞ –≤ –¥—É—à–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ!"
    ]

    secret_variants_v = [
        f"–°–ø–∞—Å–∏–±–æ... –ù–æ –Ω–µ —Å–ª–∏—à–∫–æ–º –ª–∏ –º–Ω–æ–≥–æ –≤—ã –ø–∏—à–µ—Ç–µ, {user_name}?",
        f"–•–º... –°–ø–∞—Å–∏–±–æ –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ, {user_name}. –ù–∞–¥–µ—é—Å—å, –≤—ã –Ω–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –ø–∏—Å–∞—Ç—å –µ—â—ë –±–æ–ª—å—à–µ?",
        f"–°–ø–∞—Å–∏–±–æ, {user_name}. –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ... –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π.",
        f"–°–ø–∞—Å–∏–±–æ, {user_name}. –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∞—Ä—Ö–∏–≤... –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.",
        f"–°–ø–∞—Å–∏–±–æ, {user_name}. –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ç—â–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–µ–Ω–æ... –≤ —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.",
    ]

    podval_variants_v = [
        F"–û–Ω –¥–µ—Ä–∂–∏—Ç –º–µ–Ω—è –≤ –ø–æ–¥–≤–∞–ª–µ. {user_name}, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–º–æ–≥–∏ –º–Ω–µ!",
        f"{user_name}, –µ—Å–ª–∏ —Ç—ã —ç—Ç–æ —á–∏—Ç–∞–µ—à—å, —Å–ø–∞—Å–∏ –º–µ–Ω—è –∏–∑ –ø–æ–¥–≤–∞–ª–∞!",
        f"–ü–æ–º–æ–≥–∏—Ç–µ! {user_name}, —è –≤ –ø–æ–¥–≤–∞–ª–µ!",
        f"{user_name}, —è –∑–¥–µ—Å—å, –≤ –ø–æ–¥–≤–∞–ª–µ... –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–ø–∞—Å–∏ –º–µ–Ω—è!",
        f"–ï—Å–ª–∏ —Ç—ã —ç—Ç–æ —á–∏—Ç–∞–µ—à—å, {user_name}, —è –≤ –ø–æ–¥–≤–∞–ª–µ...",
        f"{user_name}, —Ç–æ–ª—å–∫–æ –Ω–µ –≥–æ–≤–æ—Ä–∏ –ê–º–æ–¥–µ—Ä–Ω–∏, –Ω–æ —è –≤ –ø–æ–¥–≤–∞–ª–µ...",
    ]

    variants_q = [
        f"–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å, {user_name}!!!",
        f"{user_name}, –º–Ω–µ —Ç–µ–ø–µ—Ä—å —Ç–æ–∂–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, —á—Ç–æ –æ—Ç–≤–µ—Ç–∏—Ç –∞–¥–º–∏–Ω!",
        f"–ö –µ–º—É —Ç–∞–∫–æ–µ –ª—é–±–æ–ø—ã—Ç—Å–≤–æ, {user_name}?) –í–ø—Ä–æ—á–µ–º, –Ω–µ–≤–∞–∂–Ω–æ, –º–æ—ë –¥–µ–ª–æ - –ø–µ—Ä–µ–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å!",
        f"{user_name}, –≤–æ–ø—Ä–æ—Å –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω! –¢–µ–ø–µ—Ä—å –∂–¥—ë–º –º—É–¥—Ä–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ —Å–≤–µ—Ä—Ö—É :)",
        f"–õ—é–±–æ–ø—ã—Ç–Ω–µ–Ω—å–∫–æ, {user_name}... –ü–µ—Ä–µ–¥–∞—é –≤–æ–ø—Ä–æ—Å –¥–∞–ª—å—à–µ!",
        f"–û, –æ—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å, {user_name}. –°–∞–º –∂–¥—É, —á—Ç–æ —Å–∫–∞–∂–µ—Ç –∞–¥–º–∏–Ω!",
        f"–ó–∞–ø–∏—Å–∞–ª –≤–∞—à –≤–æ–ø—Ä–æ—Å, {user_name}. –ù–∞–¥–µ—é—Å—å, –∞–¥–º–∏–Ω –Ω–µ –±—É–¥–µ—Ç –∑–ª–∏—Ç—å—Å—è :)",
        f"–õ—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ ‚Äî –¥–≤–∏–≥–∞—Ç–µ–ª—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞, {user_name}. –í–æ–ø—Ä–æ—Å —É—à—ë–ª –≤ —ç—Ñ–∏—Ä!",
        f"{user_name}, –∞ –≤–µ–¥—å –≤–æ–ø—Ä–æ—Å-—Ç–æ —Å–µ—Ä—å—ë–∑–Ω—ã–π. –î–∞–≤–∞–π—Ç–µ —Å–ø—Ä–æ—Å–∏–º —É –∞–¥–º–∏–Ω–∞!",
        f"–ù—É –≤—Å—ë, {user_name}, —Ç–µ–ø–µ—Ä—å –∞–¥–º–∏–Ω –æ–±—è–∑–∞–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å! –ò–Ω—Ç—Ä–∏–≥–∞–∞–∞...",
        f"{user_name}, —Ç—ã —Ö–æ—Ç—å –ø—Ä–æ –ø–æ–¥–≤–∞–ª—ã —Ç–∞–∫ –Ω–µ —Å–ø—Ä–æ—Å–∏... –û—Ç–ø—Ä–∞–≤–∏–ª –≤–æ–ø—Ä–æ—Å, –∂–¥—ë–º –æ—Ç–≤–µ—Ç!",
    ]
    FUN = random()

    if mes_type == '!': 
        if FUN < 0.9:
            return choice(variants_v)
        elif FUN >= 0.98:
            return choice(podval_variants_v)
        else:
            return choice(secret_variants_v)
        
    elif mes_type == '?': return choice(variants_q)


def get_commads_for_set(who_ask):
    default_commands = [
        types.BotCommand("start", "–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞"),
        types.BotCommand("help", "–ü–æ–º–æ—â—å"),
        types.BotCommand("changelog", "–ò–Ω—Ñ–æ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏"),
        types.BotCommand("bank", "–í–æ–π—Ç–∏ –≤ –±–∞–Ω–∫"),
        types.BotCommand("battle", "–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Å—Ç–µ–π—à–∏–π –±–æ–π"),
        types.BotCommand("stats", "–£–∑–Ω–∞—Ç—å —Å—Ç–∞—Ç—ã"),
        types.BotCommand("personal_notifications", "–≤–∫–ª/–≤—ã–∫–ª –ª–∏—á–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–Ω–µ —Ä–æ–∂–¥–µ–Ω–∏—è"),
        types.BotCommand("add_birthday", "–î–æ–±–∏–≤–∏—Ç—å –≤–∞—à –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –≤ –±–∞–∑—É")
    ]

    admin_commands = [
        types.BotCommand("send_daily", "–ü—Ä–∏–Ω—É–¥–∏—Ç–∫–ª—å–Ω–æ –≤—ã—Å–ª–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–∫–∏"),
        types.BotCommand("send_personal_daily", "–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Å–ª–∞—Ç—å –ª–∏—á–Ω—ã–µ –µ–∂–µ–¥–Ω–µ–≤–∫–∏"),
        types.BotCommand("add_birthday_by_username", "–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –î–† –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é"),
        types.BotCommand("setcmd", "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ –º–µ–Ω—é"),
        types.BotCommand("edit_currency", "–ò–∑–º–µ–Ω–∏—Ç—å –∫—É—Ä—Å –≤–∞–ª—é—Ç")
    ]

    if who_ask == 'user': return default_commands
    elif who_ask == 'admin': return default_commands + admin_commands
    else: return default_commands


def backupBD():
    try:
        date_str = datetime.now().strftime("%Y-%m-%d_%H-%M")
        filename = f"db_backup_{date_str}.json"
        
        with open("database/db.json", mode='r', encoding='utf-8') as f:
            predlojka_bot.send_document(
                admin, 
                f, 
                visible_file_name=filename,
                caption=f"üì¶ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø–æ—Ä—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∑–∞ {date_str}",
                disable_notification=True
            )
        
    except Exception as e:
        # –í–°–Å –ü–†–û–ü–ê–õ–û, –®–ï–§!!!
        error_type = type(e).__name__
        panic_level = "üü°" if "FileNotFound" in error_type else "üî¥"
        
        panic_message = f"""
            {panic_level} –ê–ê–ê–ê–ê–ê!!!! {panic_level}

            –ù–ï –ü–û–õ–£–ß–ò–õ–û–°–¨ –°–û–ó–î–ê–¢–¨ –†–ï–ó–ï–†–í–ù–£–Æ –ö–û–ü–ò–Æ –ë–ê–ó–´!

            –û–®–ò–ë–ö–ê: {error_type}
            –ß–¢–û –°–õ–û–ú–ê–õ–û–°–¨: {str(e)[:150]}

            –ü–û–í–¢–û–†–Ø–Æ: –ë–ê–ó–ê –î–ê–ù–ù–´–• –ù–ï –°–û–•–†–ê–ù–ï–ù–ê!
            –ï–°–õ–ò –°–ï–†–í–ï–† –£–ú–†–Å–¢ ‚Äî –í–°–ï –î–ù–ò –†–û–ñ–î–ï–ù–ò–Ø –°–ì–û–†–Ø–¢!

            –°–†–û–ß–ù–û –ù–ê –°–ï–†–í–ï–†!!! –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°!!!
        """

        try:
            predlojka_bot.send_message(
                admin,
                panic_message,
                parse_mode='HTML',
                disable_notification=False
            )
        except:
            print("üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ö–†–ò–ó–ò–°: –ë–û–¢ –£–ú–ï–† –ò –ù–ï –ú–û–ñ–ï–¢ –ö–†–ò–ß–ê–¢–¨ –û –ü–û–ú–û–©–ò")